### Servlet container

: WAS 서버 내부에 생성되는 공간으로 필요한 서블릿을 생성/실행/보관합니다. 서블릿 객체는 WAS가 생성한 Request, Response 객체를 개발자가 편리하게 사용할 수 있도록 도와줍니다. Request, Response 객체는 요청마다 생성되나 서블릿 객체는 싱글톤으로 공유되어 사용합니다.


### Servlet 역할 

1. 웹서버와 통신

   : 서버 TC/TP 대기, 소켓 연결, HTTP 요청 메세지를 파싱 읽기, POST 방식, Content-Type 확인, HTTP 메시지 바디 내용 피싱, 저장 프로세스 실행, HTTP 응답 메시지 생성, HTTP 시작 라인 생성, Header 생성, 메시지 바디에 HTML 생성에서 입력, 서버 TC/TP 대기, 소켓 연결 종료 등 많은 것들을 서블릿이 전부 처리해줍니다.

2. 멀티쓰레드 지원 및 관리

   : 요청이 올 때마다 새로운 자바 쓰레드를 생성, HTTP 메소드를 실행하고 나면 쓰레드는 자동 소멸
    
3.  서블릿 생명주기 관리 
    
   : 서블릿 클래스를 로딩하여 인스턴스화, 초기화 메소드 호출, 요청 시 서블릿 메소드 호출, 서블릿 소멸 시 GC 진행
      
4.  선언적 보안 관리

    : 보안에 관련된 내용을 서블릿 또는 자바 클래스에 구현해 놓지 않아도 됩니다.

HTTP 요청이 오게 되면 WAS는 Request, Response 객체를 새로 만들어서 서블릿 객체 호출합니다.


#### 웹 서버와 servlet container의 요청 처리 방식

1. 웹서버가 HTTP 요청을 받는다

2. 웹서버는 요청을 서블릿 컨테이너로 전달합니다.

3. 서블릿이 컨테이너에 없다면, 서블릿을 동적으로 검색하여 컨테이너의 주소 공간에 로드한다

4. 컨테이너가 서블릿의 init() 메소드를 호출하면, 서블릿이 초기화된다
   : 서블릿이 처음 로드됐을 때 한번만 호출

5. 컨테이너가 서블릿의 service() 메소드를 호출하여 HTTP 요청을 처리한다.
   (요청의 데이터를 읽고, 응답을 만들어낸다)

6. 서블릿은 컨테이너 주소에 남아있고, 다른 HTTP 요청들을 처리할 수 있습니다.

7. 웹서버는 동적으로 생성된 결과를 올바른 위치에 반환한다.


----

Servlet

: .java 파일로 controller 위주로 개발이 권장됩니다. 


JSP

: .jsp 파일로 브라우저에 자바 데이터 출력 용도. 즉 view 위주 개발, 자동으로 servlet으로 변환됩니다. 
